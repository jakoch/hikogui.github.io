<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HikoGUI: Render architecture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="version_dropdown.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">HikoGUI
   </div>
   <div id="projectbrief">A low latency retained GUI</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Render architecture</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Vulkan is used as the backend for rendering windows.</p>
<div class="fragment"><div class="line">   +---------+</div>
<div class="line">   |Swapchain|</div>
<div class="line">   +---------+</div>
<div class="line">        |</div>
<div class="line">        |</div>
<div class="line">   Tone Mapper</div>
<div class="line">        |</div>
<div class="line">   +---------+--------+</div>
<div class="line">   | f16rgba | Depth  |</div>
<div class="line">   +---------+--------+</div>
<div class="line">    |  |  | |</div>
<div class="line">    |  |  | +----------------------------------+</div>
<div class="line">    |  |  +-----------------------+            |</div>
<div class="line">    |  +------------+             |            |</div>
<div class="line">    |               |             |            |</div>
<div class="line">Box Shader     Image Shader  SDF Shader    Hole Punch</div>
<div class="line">                    |             |</div>
<div class="line">               +---------+   +---------+</div>
<div class="line">               |  Atlas  |   |  Atlas  |</div>
<div class="line">               +---------+   +---------+</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md154"></a>
Window</h1>
<p>The swap-chain of the window will consist of RGBA images, with the format that can be handled by the operating system. This may be an 8-bit sRGB color space format or an extended float 16 sRGB.</p>
<p>HikoGUI will use alpha blender to render the user interface on top of the swap chain. This means an application can use render an image into the swap-chain before this. See the hole-punch shader on how to set the alpha channel on a region.</p>
<h1><a class="anchor" id="autotoc_md155"></a>
Single pass, five sub-passes</h1>
<p>The whole render architecture is using a single pass with five sub-passes.</p>
<p>By using a single pass, the shader of the sub-passes are able to efficiently read from the frame-buffer. This frame buffer can be ephemeral and be located completely in fast on-GPU-chip memory. This will make rendering on mobile GPUs a lot more efficient compared to multi-pass architectures.</p>
<p>This shared frame buffer is in float-16 extended-sRGB, which allows for HDR/WCG (High Dynamic Range / Wide Color Gamut). The frame buffer also includes a depth image.</p>
<p>The five sub-passes are:</p>
<ul>
<li>Box Shader - Render anti-aliased rectangles with rounded corners.</li>
<li>Image Shader - Render anti-aliased texture mapped quads.</li>
<li>SDF Shader - Render text-glyphs with sub-pixel-anti-aliasing.</li>
<li>Hole punch - Modified alpha value to control the tone mapper.</li>
<li>Tone Mapper - Convert HDR/WCG image to the reduced range of the display.</li>
</ul>
<h1><a class="anchor" id="autotoc_md156"></a>
Text Shaping</h1>
<h2><a class="anchor" id="autotoc_md157"></a>
Glyph Lookup algorithm</h2>
<ol type="1">
<li>Search grapheme's code points in the font</li>
<li>Lookup grapheme's decomposed code points in the font</li>
<li>Find the closest matching font compared to the font-style.</li>
<li>Open the matching font.</li>
<li>Lookup glyphs matching the code points from the grapheme's</li>
<li>If the next grapheme's style is the same, then try looking up the code-points in the current font, otherwise start at <code>1</code>.</li>
<li>Otherwise, start at <code>1</code> with the next grapheme.</li>
</ol>
<p>A grapheme's code point is looked up into the code-point-to-fonts table. The returned fonts are then matched with the font-style of the grapheme.</p>
<p>This font is cached based on the style, and any code point is first checked with this cached font. If the code point is not found then the full lookup is done.</p>
<h1><a class="anchor" id="autotoc_md158"></a>
Themes</h1>
<p>A theme consists of predefined colors, fonts and shape sizes. A theme is loaded from a json file. The theme directory is scanned for all themes and from the preferences the user can select the current theme at runtime.</p>
<h2><a class="anchor" id="autotoc_md159"></a>
Colors</h2>
<h3><a class="anchor" id="autotoc_md160"></a>
Accent Color</h3>
<h3><a class="anchor" id="autotoc_md161"></a>
Semantic Color</h3>
<h2><a class="anchor" id="autotoc_md162"></a>
Font Styles</h2>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.9.8-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Sep 29 2023 19:33:19 for HikoGUI by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
<script>
mermaid.initialize({
    startOnLoad: true,
    theme: 'base',
    themeVariables: {
    primaryColor: '#f4f4ff',
    secondaryColor: 'rgba(244,244,255,0.9)',
    tertiaryColor: '#F9FAFC',
    },
});
</script>
</body>
</html>
</html>